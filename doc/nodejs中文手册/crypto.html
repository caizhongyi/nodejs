<!DOCTYPE html>
<html lang="zh_CN">
<head>
  <meta charset="utf-8" />
  <title>crypto - Node.js Manual &amp; Documentation</title>
  <link rel="stylesheet" href="res/style.css" tppabs="http://cnodejs.org/cman/res/style.css" type="text/css" media="all" />
  <link rel="stylesheet" href="res/sh.css" tppabs="http://cnodejs.org/cman/res/sh.css" type="text/css" media="all"/>
</head>
<body>
  <div id="container">
    <header>
      <h1>Node.js Manual &amp; Documentation</h1>
      <div id="gtoc">
        <p><a href="index.html" tppabs="http://cnodejs.org/cman/index.html">Index</a> | <a href="all.html" tppabs="http://cnodejs.org/cman/all.html">View on single page</a></p>
      </div>
      <hr />
    </header>
    <div id="toc"><h2>Table Of Contents</h2><ul><li><a href="#crypto_">Crypto åŠ å¯†æ¨¡å—</a><ul><li><a href="#crypto.createCredentials">crypto.createCredentials(details)</a></li><li><a href="#crypto.createHash">crypto.createHash(algorithm)</a></li><li><a href="#hash.update">hash.update(data)</a></li><li><a href="#hash.digest">hash.digest(encoding='binary')</a></li><li><a href="#crypto.createHmac">crypto.createHmac(algorithm, key)</a></li><li><a href="#hmac.update">hmac.update(data)</a></li><li><a href="#hmac.digest">hmac.digest(encoding='binary')</a></li><li><a href="#crypto.createCipher">crypto.createCipher(algorithm, key)</a></li><li><a href="#cipher.update">cipher.update(data, input_encoding='binary', output_encoding='binary')</a></li><li><a href="#cipher.final">cipher.final(output_encoding='binary')</a></li><li><a href="#crypto.createDecipher">crypto.createDecipher(algorithm, key)</a></li><li><a href="#decipher.update">decipher.update(data, input_encoding='binary', output_encoding='binary')</a></li><li><a href="#decipher.final">decipher.final(output_encoding='binary')</a></li><li><a href="#crypto.createSign">crypto.createSign(algorithm)</a></li><li><a href="#signer.update">signer.update(data)</a></li><li><a href="#signer.sign">signer.sign(private_key, output_format='binary')</a></li><li><a href="#crypto.createVerify">crypto.createVerify(algorithm)</a></li><li><a href="#verifier.update">verifier.update(data)</a></li><li><a href="#verifier.verify">verifier.verify(cert, signature, signature_format='binary')</a></li></ul></li></ul><hr /></div>
<h2 id="crypto_">Crypto åŠ å¯†æ¨¡å—</h2>

<p>Use <code>require('crypto')</code> to access this module.</p>

<p>ä½¿ç”¨<code>require('crypto')</code>è°ƒç”¨åŠ å¯†æ¨¡å—ã€‚</p>

<p>The crypto module requires OpenSSL to be available on the underlying platform.
It offers a way of encapsulating secure credentials to be used as part
of a secure HTTPS net or http connection.</p>

<p>åŠ å¯†æ¨¡å—éœ€è¦åº•å±‚ç³»ç»Ÿæä¾›OpenSSLçš„æ”¯æŒã€‚å®ƒæä¾›äº†ä¸€ç§å®‰å…¨å‡­è¯çš„å°è£…æ–¹å¼ï¼Œå¯ä»¥ç”¨äºHTTPSå®‰å…¨ç½‘ç»œä»¥åŠæ™®é€šHTTPè¿æ¥ã€‚</p>

<p>It also offers a set of wrappers for OpenSSL's hash, hmac, cipher, decipher, sign and verify methods.</p>

<p>è¯¥æ¨¡å—è¿˜æä¾›äº†ä¸€å¥—é’ˆå¯¹OpenSSLçš„hashï¼ˆå“ˆå¸Œï¼‰ï¼Œhmacï¼ˆå¯†é’¥å“ˆå¸Œï¼‰ï¼Œcipherï¼ˆç¼–ç ï¼‰ï¼Œdecipherï¼ˆè§£ç ï¼‰ï¼Œsignï¼ˆç­¾åï¼‰ä»¥åŠverifyï¼ˆéªŒè¯ï¼‰ç­‰æ–¹æ³•çš„å°è£…ã€‚</p>

<h3 id="crypto.createCredentials">crypto.createCredentials(details)</h3>

<p>Creates a credentials object, with the optional details being a dictionary with keys:</p>

<p>åˆ›å»ºä¸€ä¸ªå‡­è¯å¯¹è±¡ï¼Œå¯é€‰å‚æ•°detailsä¸ºä¸€ä¸ªå¸¦é”®å€¼çš„å­—å…¸ï¼š</p>

<ul><li><p><code>key</code> : a string holding the PEM encoded private key</p><p><code>key</code>ï¼šä¸ºå­—ç¬¦ä¸²å‹ï¼ŒPEMç¼–ç çš„ç§é’¥ã€‚</p></li><li><p><code>cert</code> : a string holding the PEM encoded certificate</p><p><code>cert</code>ï¼šä¸ºå­—ç¬¦ä¸²å‹ï¼ŒPEMç¼–ç çš„è®¤è¯è¯ä¹¦ã€‚</p></li><li><p><code>ca</code> : either a string or list of strings of PEM encoded CA certificates to trust.</p><p><code>ca</code>ï¼šå­—ç¬¦ä¸²å½¢å¼çš„PEMç¼–ç å¯ä¿¡CAè¯ä¹¦ï¼Œæˆ–è¯ä¹¦åˆ—è¡¨ã€‚</p></li></ul>

<p>If no 'ca' details are given, then node.js will use the default publicly trusted list of CAs as given in
<a href="javascript:if(confirm('http://mxr.mozilla.org/mozilla/source/security/nss/lib/ckfw/builtins/certdata.txt  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://mxr.mozilla.org/mozilla/source/security/nss/lib/ckfw/builtins/certdata.txt'" tppabs="http://mxr.mozilla.org/mozilla/source/security/nss/lib/ckfw/builtins/certdata.txt">http://mxr.mozilla.org/mozilla/source/security/nss/lib/ckfw/builtins/certdata.txt</a>.</p>

<p>å¦‚æœæ²¡æœ‰ç»™å‡º'ca'çš„è¯¦ç»†å†…å®¹ï¼Œé‚£ä¹ˆnode.jså°†ä¼šä½¿ç”¨é»˜è®¤çš„å…¬å¼€å—ä¿¡ä»»åˆ—è¡¨ï¼Œè¯¥è¡¨ä½äº<a href="javascript:if(confirm('http://mxr.mozilla.org/mozilla/source/security/nss/lib/ckfw/builtins/certdata.txt  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://mxr.mozilla.org/mozilla/source/security/nss/lib/ckfw/builtins/certdata.txt'" tppabs="http://mxr.mozilla.org/mozilla/source/security/nss/lib/ckfw/builtins/certdata.txt">http://mxr.mozilla.org/mozilla/source/security/nss/lib/ckfw/builtins/certdata.txt</a>ã€‚</p>

<h3 id="crypto.createHash">crypto.createHash(algorithm)</h3>

<p>Creates and returns a hash object, a cryptographic hash with the given algorithm
which can be used to generate hash digests.</p>

<p>åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªhashå¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡å®šç®—æ³•çš„åŠ å¯†hashï¼Œç”¨äºç”Ÿæˆhashæ‘˜è¦ã€‚</p>

<p><code>algorithm</code> is dependent on the available algorithms supported by the version
of OpenSSL on the platform. Examples are <code>'sha1'</code>, <code>'md5'</code>, <code>'sha256'</code>, <code>'sha512'</code>, etc.
On recent releases, <code>openssl list-message-digest-algorithms</code> will display the available digest algorithms.</p>

<p>å‚æ•°<code>algorithm</code>å¯é€‰æ‹©ç³»ç»Ÿä¸Šå®‰è£…çš„OpenSSLç‰ˆæœ¬æ‰€æ”¯æŒçš„ç®—æ³•ã€‚ä¾‹å¦‚ï¼š<code>'sha1'</code>, <code>'md5'</code>, <code>'sha256'</code>, <code>'sha512'</code>ç­‰ã€‚åœ¨è¿‘æœŸå‘è¡Œçš„ç‰ˆæœ¬ä¸­ï¼Œ<code>openssl list-message-digest-algorithms</code>ä¼šæ˜¾ç¤ºè¿™äº›å¯ç”¨çš„æ‘˜è¦ç®—æ³•ã€‚</p>

<h3 id="hash.update">hash.update(data)</h3>

<p>Updates the hash content with the given <code>data</code>.
This can be called many times with new data as it is streamed.</p>

<p>æ›´æ–°hashçš„å†…å®¹ä¸ºæŒ‡å®šçš„<code>data</code>ã€‚å½“ä½¿ç”¨æµæ•°æ®æ—¶å¯èƒ½ä¼šå¤šæ¬¡è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p>

<h3 id="hash.digest">hash.digest(encoding='binary')</h3>

<p>Calculates the digest of all of the passed data to be hashed.
The <code>encoding</code> can be <code>'hex'</code>, <code>'binary'</code> or <code>'base64'</code>.</p>

<p>è®¡ç®—æ‰€æœ‰ä¼ å…¥æ•°æ®çš„hashæ‘˜è¦ã€‚å‚æ•°<code>encoding</code>ï¼ˆç¼–ç æ–¹å¼ï¼‰å¯ä»¥ä¸º<code>'hex'</code>, <code>'binary'</code> æˆ–è€…<code>'base64'</code>ã€‚</p>

<h3 id="crypto.createHmac">crypto.createHmac(algorithm, key)</h3>

<p>Creates and returns a hmac object, a cryptographic hmac with the given algorithm and key.</p>

<p>åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªhmacå¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡å®šç®—æ³•å’Œå¯†é’¥çš„åŠ å¯†hmacã€‚</p>

<p><code>algorithm</code> is dependent on the available algorithms supported by OpenSSL - see createHash above.
<code>key</code> is the hmac key to be used.</p>

<p>å‚æ•°<code>algorithm</code>å¯é€‰æ‹©OpenSSLæ”¯æŒçš„ç®—æ³• - å‚è§ä¸Šæ–‡çš„createHashã€‚å‚æ•°<code>key</code>ä¸ºhmacæ‰€ä½¿ç”¨çš„å¯†é’¥ã€‚</p>

<h3 id="hmac.update">hmac.update(data)</h3>

<p>Update the hmac content with the given <code>data</code>.
This can be called many times with new data as it is streamed.</p>

<p>æ›´æ–°hmacçš„å†…å®¹ä¸ºæŒ‡å®šçš„<code>data</code>ã€‚å½“ä½¿ç”¨æµæ•°æ®æ—¶å¯èƒ½ä¼šå¤šæ¬¡è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p>

<h3 id="hmac.digest">hmac.digest(encoding='binary')</h3>

<p>Calculates the digest of all of the passed data to the hmac.
The <code>encoding</code> can be <code>'hex'</code>, <code>'binary'</code> or <code>'base64'</code>.</p>

<p>è®¡ç®—æ‰€æœ‰ä¼ å…¥æ•°æ®çš„hmacæ‘˜è¦ã€‚å‚æ•°<code>encoding</code>ï¼ˆç¼–ç æ–¹å¼ï¼‰å¯ä»¥ä¸º<code>'hex'</code>, <code>'binary'</code> æˆ–è€…<code>'base64'</code>ã€‚</p>

<h3 id="crypto.createCipher">crypto.createCipher(algorithm, key)</h3>

<p>Creates and returns a cipher object, with the given algorithm and key.</p>

<p>ä½¿ç”¨æŒ‡å®šçš„ç®—æ³•å’Œå¯†é’¥åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªcipherå¯¹è±¡ã€‚</p>

<p><code>algorithm</code> is dependent on OpenSSL, examples are <code>'aes192'</code>, etc.
On recent releases, <code>openssl list-cipher-algorithms</code> will display the available cipher algorithms.</p>

<p>å‚æ•°<code>algorithm</code>å¯é€‰æ‹©OpenSSLæ”¯æŒçš„ç®—æ³•ï¼Œä¾‹å¦‚<code>'aes192'</code>ç­‰ã€‚åœ¨æœ€è¿‘çš„å‘è¡Œç‰ˆä¸­ï¼Œ<code>openssl list-cipher-algorithms</code>ä¼šæ˜¾ç¤ºå¯ç”¨çš„åŠ å¯†çš„ç®—æ³•ã€‚</p>

<h3 id="cipher.update">cipher.update(data, input_encoding='binary', output_encoding='binary')</h3>

<p>Updates the cipher with <code>data</code>, the encoding of which is given in <code>input_encoding</code>
and can be <code>'utf8'</code>, <code>'ascii'</code> or <code>'binary'</code>. The <code>output_encoding</code> specifies
the output format of the enciphered data, and can be <code>'binary'</code>, <code>'base64'</code> or <code>'hex'</code>.</p>

<p>ä½¿ç”¨å‚æ•°<code>data</code>æ›´æ–°è¦åŠ å¯†çš„å†…å®¹ï¼Œå…¶ç¼–ç æ–¹å¼ç”±å‚æ•°<code>input_encoding</code>æŒ‡å®šï¼Œå¯ä»¥ä¸º <code>'utf8'</code>, <code>'ascii'</code>æˆ–è€…<code>'binary'</code>ã€‚å‚æ•°<code>output_encoding</code>æŒ‡å®šäº†å·²åŠ å¯†å†…å®¹çš„è¾“å‡ºç¼–ç æ–¹å¼ï¼Œå¯ä»¥ä¸º <code>'binary'</code>, <code>'base64'</code>æˆ–<code>'hex'</code>ã€‚</p>

<p>Returns the enciphered contents, and can be called many times with new data as it is streamed.</p>

<p>è¿”å›å·²åŠ å¯†çš„å†…å®¹ï¼Œå½“ä½¿ç”¨æµæ•°æ®æ—¶å¯èƒ½ä¼šå¤šæ¬¡è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p>

<h3 id="cipher.final">cipher.final(output_encoding='binary')</h3>

<p>Returns any remaining enciphered contents, with <code>output_encoding</code> being one of: <code>'binary'</code>, <code>'ascii'</code> or <code>'utf8'</code>.</p>

<p>è¿”å›æ‰€æœ‰å‰©ä½™çš„åŠ å¯†å†…å®¹ï¼Œ<code>output_encoding</code>è¾“å‡ºç¼–ç ä¸º<code>'binary'</code>, <code>'ascii'</code>æˆ–<code>'utf8'</code>å…¶ä¸­ä¹‹ä¸€ã€‚</p>

<h3 id="crypto.createDecipher">crypto.createDecipher(algorithm, key)</h3>

<p>Creates and returns a decipher object, with the given algorithm and key.
This is the mirror of the cipher object above.</p>

<p>ä½¿ç”¨ç»™å®šçš„ç®—æ³•å’Œå¯†é’¥åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªè§£å¯†å¯¹è±¡ã€‚è¯¥å¯¹è±¡ä¸ºä¸Šè¿°åŠ å¯†å¯¹è±¡çš„åå‘è¿ç®—ã€‚</p>

<h3 id="decipher.update">decipher.update(data, input_encoding='binary', output_encoding='binary')</h3>

<p>Updates the decipher with <code>data</code>, which is encoded in <code>'binary'</code>, <code>'base64'</code> or <code>'hex'</code>.
The <code>output_decoding</code> specifies in what format to return the deciphered plaintext: <code>'binary'</code>, <code>'ascii'</code> or <code>'utf8'</code>.</p>

<p>ä½¿ç”¨å‚æ•°<code>data</code>æ›´æ–°è¦è§£å¯†çš„å†…å®¹ï¼Œå…¶ç¼–ç æ–¹å¼ä¸º<code>'binary'</code>ï¼Œ<code>'base64'</code>æˆ–<code>'hex'</code>ã€‚å‚æ•°<code>output_encoding</code>æŒ‡å®šäº†å·²è§£å¯†çš„æ˜æ–‡å†…å®¹çš„è¾“å‡ºç¼–ç æ–¹å¼ï¼Œå¯ä»¥ä¸º <code>'binary'</code>ï¼Œ<code>'ascii'</code>æˆ–<code>'utf8'</code>ã€‚</p>

<h3 id="decipher.final">decipher.final(output_encoding='binary')</h3>

<p>Returns any remaining plaintext which is deciphered,
with <code>output_encoding' being one of: </code>'binary'<code>, </code>'ascii'<code> or </code>'utf8'`.</p>

<p>è¿”å›å…¨éƒ¨å‰©ä½™çš„å·²è§£å¯†çš„æ˜æ–‡ï¼Œå…¶<code>output_encoding' ä¸º</code>'binary'<code>, </code>'ascii'<code>æˆ–</code>'utf8'`å…¶ä¸­ä¹‹ä¸€ã€‚</p>

<h3 id="crypto.createSign">crypto.createSign(algorithm)</h3>

<p>Creates and returns a signing object, with the given algorithm.
On recent OpenSSL releases, <code>openssl list-public-key-algorithms</code> will display
the available signing algorithms. Examples are <code>'RSA-SHA256'</code>.</p>

<p>ä½¿ç”¨ç»™å®šçš„ç®—æ³•åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªç­¾åå™¨å¯¹è±¡ã€‚åœ¨ç°æœ‰çš„OpenSSLå‘è¡Œç‰ˆä¸­ï¼Œ<code>openssl list-public-key-algorithms</code>ä¼šæ˜¾ç¤ºå¯ç”¨çš„ç­¾åç®—æ³•ï¼Œä¾‹å¦‚ï¼š<code>'RSA-SHA256'</code>ã€‚</p>

<h3 id="signer.update">signer.update(data)</h3>

<p>Updates the signer object with data.
This can be called many times with new data as it is streamed.</p>

<p>ä½¿ç”¨dataå‚æ•°æ›´æ–°ç­¾åå™¨å¯¹è±¡ã€‚å½“ä½¿ç”¨æµæ•°æ®æ—¶å¯èƒ½ä¼šå¤šæ¬¡è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p>

<h3 id="signer.sign">signer.sign(private_key, output_format='binary')</h3>

<p>Calculates the signature on all the updated data passed through the signer.
<code>private_key</code> is a string containing the PEM encoded private key for signing.</p>

<p>å¯¹æ‰€æœ‰ä¼ å…¥ç­¾åå™¨çš„æ•°æ®è®¡ç®—å…¶ç­¾åã€‚<code>private_key</code>ä¸ºå­—ç¬¦ä¸²ï¼Œå®ƒåŒ…å«äº†PEMç¼–ç çš„ç”¨äºç­¾åçš„ç§é’¥ã€‚</p>

<p>Returns the signature in <code>output_format</code> which can be <code>'binary'</code>, <code>'hex'</code> or <code>'base64'</code>.</p>

<p>è¿”å›ç­¾åï¼Œå…¶<code>output_format</code>è¾“å‡ºå¯ä»¥ä¸º<code>'binary'</code>, <code>'hex'</code> æˆ–è€…<code>'base64'</code>ã€‚</p>

<h3 id="crypto.createVerify">crypto.createVerify(algorithm)</h3>

<p>Creates and returns a verification object, with the given algorithm.
This is the mirror of the signing object above.</p>

<p>ä½¿ç”¨ç»™å®šç®—æ³•åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªéªŒè¯å™¨å¯¹è±¡ã€‚å®ƒæ˜¯ä¸Šè¿°ç­¾åå™¨å¯¹è±¡çš„åå‘è¿ç®—ã€‚</p>

<h3 id="verifier.update">verifier.update(data)</h3>

<p>Updates the verifier object with data.
This can be called many times with new data as it is streamed.</p>

<p>ä½¿ç”¨dataå‚æ•°æ›´æ–°éªŒè¯å™¨å¯¹è±¡ã€‚å½“ä½¿ç”¨æµæ•°æ®æ—¶å¯èƒ½ä¼šå¤šæ¬¡è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p>

<h3 id="verifier.verify">verifier.verify(cert, signature, signature_format='binary')</h3>

<p>Verifies the signed data by using the <code>cert</code> which is a string containing
the PEM encoded public key, and <code>signature</code>, which is the previously calculates
signature for the data, in the <code>signature_format</code> which can be <code>'binary'</code>, <code>'hex'</code> or <code>'base64'</code>.</p>

<p>ä½¿ç”¨å‚æ•°<code>cert</code>å’Œ<code>signature</code>éªŒè¯å·²ç­¾åçš„æ•°æ®ï¼Œ<code>cert</code>ä¸ºç»è¿‡PEMç¼–ç çš„å…¬é’¥å­—ç¬¦ä¸²ï¼Œ<code>signature</code>ä¸ºä¹‹å‰å·²è®¡ç®—çš„æ•°æ®çš„ç­¾åï¼Œ<code>signature_format</code>å¯ä»¥ä¸º<code>'binary'</code>ï¼Œ<code>'hex'</code> æˆ–è€…<code>'base64'</code>ã€‚</p>

<p>Returns true or false depending on the validity of the signature for the data and public key.</p>

<p>æ ¹æ®å¯¹æ•°æ®å’Œå…¬é’¥è¿›è¡Œç­¾åæœ‰æ•ˆæ€§éªŒè¯çš„ç»“æœï¼Œè¿”å›trueæˆ–è€…falseã€‚</p>
  </div>
  <script type="text/javascript" src="res/sh_main.js" tppabs="http://cnodejs.org/cman/res/sh_main.js"></script>
  <script type="text/javascript" src="res/sh_javascript.min.js" tppabs="http://cnodejs.org/cman/res/sh_javascript.min.js"></script>
  <script type="text/javascript">highlight(undefined, undefined, 'pre');</script>
</body>
</html>
